name: üì¶ –û–±–Ω–æ–≤–∏—Ç—å –∫–∞—Ç–∞–ª–æ–≥ —Å Google Sheets

on:
  workflow_dispatch:  # –ø–æ–∑–≤–æ–ª—è–µ—Ç –∑–∞–ø—É—Å–∫–∞—Ç—å –≤—Ä—É—á–Ω—É—é –ø–æ –∫–Ω–æ–ø–∫–µ –Ω–∞ GitHub

jobs:
  update-catalog:
    runs-on: ubuntu-latest

    steps:
      - name: üì• –ö–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è
        uses: actions/checkout@v4

      - name: ‚¨áÔ∏è –°–∫–∞—á–∏–≤–∞–Ω–∏–µ CSV —Å Google Sheets
        run: |
          mkdir -p assets
          curl -L "https://docs.google.com/spreadsheets/d/1G-0NZi7_omk37RKGFr7A6eVuGZLkGzx3TMJuS4LH0ew/export?format=csv" -o assets/products.csv

      - name: üõ†Ô∏è –£—Å—Ç–∞–Ω–æ–≤–∫–∞ Hugo
        uses: peaceiris/actions-hugo@v2
        with:
          hugo-version: 'latest'

      - name: üî® –°–±–æ—Ä–∫–∞ Hugo-—Å–∞–π—Ç–∞
        run: hugo --cleanDestinationDir

      - name: üì§ –î–µ–ø–ª–æ–π –Ω–∞ gh-pages (–µ—Å–ª–∏ –±—ã–ª–∏ –∏–∑–º–µ–Ω–µ–Ω–∏—è)
        uses: peaceiris/actions-gh-pages@v3
        with:
          github_token: ${{ secrets.GITHUB_TOKEN }}
          publish_dir: ./public
          publish_branch: gh-pages
          force_orphan: true  # —Å–æ–∑–¥–∞—ë—Ç —á–∏—Å—Ç—É—é –∏—Å—Ç–æ—Ä–∏—é (–ø–æ –∂–µ–ª–∞–Ω–∏—é)
